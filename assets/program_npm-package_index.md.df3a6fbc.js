import{_ as s,o as a,c as n,U as p}from"./chunks/framework.0f008bc5.js";const m=JSON.parse('{"title":"使用 dumi 发布个人的 npm 包","description":"","frontmatter":{"author":"Kano","date":"2022-11-26T00:00:00.000Z"},"headers":[],"relativePath":"program/npm-package/index.md","filePath":"program/npm-package/index.md","lastUpdated":1690359404000}'),l={name:"program/npm-package/index.md"},e=p(`<h1 id="使用-dumi-发布个人的-npm-包" tabindex="-1">使用 dumi 发布个人的 npm 包 <a class="header-anchor" href="#使用-dumi-发布个人的-npm-包" aria-label="Permalink to &quot;使用 dumi 发布个人的 npm 包&quot;">​</a></h1><h2 id="前期准备" tabindex="-1">前期准备 <a class="header-anchor" href="#前期准备" aria-label="Permalink to &quot;前期准备&quot;">​</a></h2><ul><li>一个 npm 账号，如果没有的话需要自行注册。</li></ul><p><a href="https://www.npmjs.com/signup" target="_blank" rel="noreferrer">npm 注册地址</a></p><ul><li>dumi 基础，可以观看如下视频快速学习文档。</li></ul><p><a href="https://www.bilibili.com/video/BV1KG4y1Z7ZX/" target="_blank" rel="noreferrer">【编程】dumi 2.0 发布，上手使用 | 文档介绍 | 居然发现 bug？</a></p><h2 id="使用-dumi" tabindex="-1">使用 dumi <a class="header-anchor" href="#使用-dumi" aria-label="Permalink to &quot;使用 dumi&quot;">​</a></h2><p>通过脚手架安装，根据提示选择对应的模版，由于我们要发布 npm 包，所以选择 <code>React Library</code>。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create-dumi</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="发布前注意事项" tabindex="-1">发布前注意事项 <a class="header-anchor" href="#发布前注意事项" aria-label="Permalink to &quot;发布前注意事项&quot;">​</a></h2><p>第一，npm 源需要使用 npmjs</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmjs.org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>第二，需要执行 <code>npm login</code>，填写用户名，邮箱等。</p><p>第三，package.json 里边 <code>name</code> 需要用小写，不能用大写</p><p>第四，确保 package.json 里边的 <code>name</code> 和目前 <a href="https://www.npmjs.com/" target="_blank" rel="noreferrer">npmjs</a> 网站已发布的不冲突。</p><h3 id="版本号规范" tabindex="-1">版本号规范 <a class="header-anchor" href="#版本号规范" aria-label="Permalink to &quot;版本号规范&quot;">​</a></h3><p>npm 包的版本通常遵循 <a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noreferrer">semver 语义化版本</a>规范。</p><p>版本格式为：major.minor.patch，每个字母代表的含义如下：</p><p>主版本号（major）：当你做了不兼容的 API 修改， 次版本号（minor）：当你做了向下兼容的功能性新增， 修订号（patch）：当你做了向下兼容的问题修正。</p><p>先行版本号是加到修订号的后面，作为版本号的延伸；当要发行大版本或核心功能时，但不能保证这个版本完全正常，就要先发一个先行版本。</p><p>先行版本号的格式是在修订版本号后面加上一个连接号（-），再加上一连串以点（.）分割的标识符，标识符可以由英文、数字和连接号（[0-9A-Za-z-]）组成。举个例子：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">1.0​​.0-alpha</span></span>
<span class="line"><span style="color:#FFCB6B;">1.0.0-alpha.1</span></span>
<span class="line"><span style="color:#FFCB6B;">1.0.0-0.2.5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>常见的先行版本号有：</p><ul><li>alpha：不稳定版本，一般而言，该版本的 Bug 较多，需要继续修改，是测试版本</li><li>beta：基本稳定，相对于 Alpha 版已经有了很大的进步，消除了严重错误</li><li>rc：和正式版基本相同，基本上不存在导致错误的 Bug</li><li>release：最终版本</li></ul><p><a href="https://juejin.cn/post/7052307032971411463" target="_blank" rel="noreferrer">此处参考：从零开始发布自己的 NPM 包</a></p><p>当然，我们最好是使用命令来规范我们的版本，举例：</p><blockquote><p>以下主要介绍常用的几个命令</p></blockquote><ul><li><code>npm version major</code> （3.1.0 --&gt; 4.0.0）</li><li><code>npm version minor</code>（2.0.1 --&gt; 2.1.0）</li><li><code>npm version patch</code>（2.0.0 --&gt; 2.0.1）</li></ul><p>至于 prexxx 开头的，以及 release 相关可以查询下述文档拓展学习。</p><p><a href="https://www.npmjs.cn/cli/version/" target="_blank" rel="noreferrer">文档指引：npm version</a></p><h2 id="补充相关命令" tabindex="-1">补充相关命令 <a class="header-anchor" href="#补充相关命令" aria-label="Permalink to &quot;补充相关命令&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">登录自己的</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">账号</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">退出当前账号</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logout</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看当前身份</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">who</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">am</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">发布</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">撤销发布某个版本</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unpublish</span><span style="color:#A6ACCD;"> [pkg]@</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">version</span><span style="color:#89DDFF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="解决遇到的问题" tabindex="-1">解决遇到的问题 <a class="header-anchor" href="#解决遇到的问题" aria-label="Permalink to &quot;解决遇到的问题&quot;">​</a></h2><h3 id="_403-问题" tabindex="-1">403 问题 <a class="header-anchor" href="#_403-问题" aria-label="Permalink to &quot;403 问题&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">code</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">E403</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Forbidden</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PUT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmjs.org/xxx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">—</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">You</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">have</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">permission</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logged</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">correct</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user?</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">In</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">most</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cases,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">one</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dependencies</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requesting</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERR!</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">forbidden</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">security</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">policy.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>一般是两种情况：</p><ul><li>邮箱不对</li><li>package.json 里边的 <code>name</code> 和目前 <a href="https://www.npmjs.com/" target="_blank" rel="noreferrer">npmjs</a> 网站已发布的冲突了</li></ul><p>参考<a href="https://medium.com/@su_bak/solve-the-error-when-npm-publish-for-the-first-time-a4cca150f379" target="_blank" rel="noreferrer">Solve the error when npm publish for the first time.</a></p>`,38),o=[e];function r(t,c,C,i,y,A){return a(),n("div",null,o)}const d=s(l,[["render",r]]);export{m as __pageData,d as default};
